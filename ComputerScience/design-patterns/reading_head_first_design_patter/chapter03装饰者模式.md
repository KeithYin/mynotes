# chapter 3 装饰者模式

> 给爱用继承的人一个全新的设计眼界
>
> 本章重点: 继承存在的问题以及解决方法

* 继承存在的问题
  * 如果子类比较多, 那么使用继承 会类型爆炸

* 装饰者模式:
  * 特点在于 **一层包一层** !!!!
  * 装饰者和被装饰对象具有相同的超类型
  * 装饰者实现的类都是小组件类型的, 但是可以通过装饰得到千变万化的效果.
  * 装饰者的另一个特点是 委托, 委托被装饰的对象干一些事情.





**星巴克咖啡例子** : (任务特点, 一个基本饮品, 但是会有一些附加调料)

|              | 纯继承方式, 一个变种一个类(有牛奶一个类,无牛奶也一个类) | 实例变量和继承追踪调料                                     |      |
| ------------ | ------------------------------------------------------- | ---------------------------------------------------------- | ---- |
| 加一个新调料 | 1. 老类:所有存在的类都要修改, 已有类会增加一倍          | 1. 基类要改, 增加一个新调料, 加一个新方法, cost 也需要修改 |      |
| 加一个新饮品 | 1. 需要加多个类, 分别对应调料的不同组合, 也很爆炸       | 1. 需要判断是否需要某个调料                                |      |
| 价格有变动   | 1. 老类: 所有的老类 设计到变价格的都需要改              | 这个容易处理                                               |      |
| 优缺点       | 没有优点, 都是缺点                                      |                                                            |      |



## 设计原则

* 为交互对象的松耦合而努力
  * 使用原则: 面向接口编程

## 设计模式

* **观察者模式**