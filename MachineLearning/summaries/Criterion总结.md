# AUC

* 物理含义: 样本中有$M$ 个正例和$N$ 个负例, 随机从正例中取一个, 再随机从负例中取一个, 正例的预测值比负例的预测值大的概率是多少
* 数学表示

$$
AUC = \frac{\sum_{i\in positive}rank_i-\frac{M(M+1)}{2}}{M*N}
$$

* 解释
  * 首先, 按照模型预测的概率对所有的样本进行排序(从大到小), 注意$rank$ 的值是从1开始的.
  * $rank_i$ : 第 $i$ 个正例的$rank$
  * $M, N$ : $M$, 正例的数量,  $N$ 负例的数量
* 为什么上述公式成立
  * 如果要求$AUC$ , 整体的样本空间 $M*N$ , 任意 $(正例, 负例)$ pair, 从里面找出 $p(正例)>p(负例)$ 有多少对就可以了.
  * 当我们排序之后, 从高到低找 正例. 找到的第一个正例我们记为 $rank_1$ , 这时我们可以确定的是 在 $rank_1$ 后面有 $M-1$ 个正例(因为$rank_1$是我们找到的第一个正例). 所以 $rank_1$ 后面的负例的个数是 $rank_1-M$ (因为包含了当前的正例, 所以$-M$ 而不是$-(M-1)$. 以此类推, 我们找到的第二个正例为 $rank_2$ , $rank_2$ 后面的负例的个数为 $rank_2 - (M-1)$ . 以此类推,  就可以得到下面的式子, 稍微整理一下就可以得到上述的式子.

$$
\sum_{i=1}^{M} \Bigr(rank_i - (M-i+1)\Bigr)
$$

