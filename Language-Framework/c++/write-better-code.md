# coding

## coding 需要的能力

* 把握问题
* 建立模型
* 沟通协作
* 编码执行



## 一流代码的特性

* 鲁棒
* 高效
* 简洁
* 简短
* 共享
* 可测试
* 可移植
* 可监控
* 可运维
* 可扩展(scalable & extensible)



总结为以下四点:

* 正确和性能
* 可读和可维护
* 共享和重用
* 运维和运营



## Bad Code的一些表现

* 命名不行
* 没有注释 & bad comment
* 函数并非单一功能
* bad layout
* 代码不可测试



## 如何写出好代码

* 代码不只是写出来: 编码时间仅占总时间 10%
* 好的代码是多个环节的结果
* 编码前: 需求分析, 系统设计
  * 前期投入的过多, 收益往往最大 (但是前期投入和经验息息相关的吧)
  * 需求分析: 定义系统/软件的黑盒行为 (external & what)
    * PM视角, RD视角
  * 系统设计: 设计系统/软件的白盒机制 (internal, how & why)
    * 系统架构, 模块设计, 接口定义, 数据定义
      * 系统架构:
        * 静: 系统如何组成, 功能在这组成部分之间如何划分
        * 动: 各子系统如何联动, 如何完成任务, 流程
        * 细: 不同的角度, 更详细的刻画系统的全貌
    * 关键算法, 设计思路(还要写上原因)
    * 设计文档分类: (为什么需要分类, 给不同的人看不同的文档)
      * 总体设计文档
      * 子系统设计文档
      * 接口文档
      * 数据库文档
      * ...
    * 如何进行系统设计
      * 每个组件(子系统 & 模块)的功能都应该足够的专注 和 单一 (功能单一是复用和扩展的基础)
      * 组件之间的关系应该简单且清晰
        * 软件中最复杂的是耦合 (这就是为什么全局变量需要避免的原因.)
      * 系统设计的约束
        * 资源的限制: 计算, 存储, IO/网络
      * 需求是系统设计决策的来源
        * 设计中, 经常要 trade-off
        * 需求是 make-decision 的重要依据
      * 模型/抽象 思维能力  (系统设计是概念的设计, 不要考虑代码调用关系, 要考虑概念之间的关系)
        * 思考的重点: 概念, 模型, 数据结构, 算法
        * 脱离开代码的细节: 函数, 语言
    * 关于接口: 非常重要!!! 修改的时候向下兼容
* 编码中: 编写代码, 单元测试
* 编码后: 集成测试, 上线, 持续运营, 迭代改进



## 写代码

> * 一个项目中, 50%的时间用于沟通
> * 软件的维护成本远高于开发成本
> * 沟通的方式? 面对面, email, 文档, **代码**
>
> 现在: 代码主要是写给人看的. 目前编译器已经很牛逼了.
>
> 编程规范(都包含啥):
>
> * 代码的表达的规范. (规范代码的表达)
> * 一些代码的注意事项
>
> 程序的构成:
>
> * 程序
>   * 模块: (一个 c, py 文件就是个模块, go的话, 一个 package 是个模块吧)
>     * 



* 模块:
  * 高内聚, 低耦合
  * 如何切分模块需要慎重考虑
  * 切分模块的角度: 数据类模块, 过程类模块
  * 数据类模块:
    * 主要完成对数据的封装, 模块内部变量, 类的内部变量
    * 对外提供明确的数据访问接口
    * 写代码要以数据为中心考虑, 很多代码后期不好维护就是因为数据没有封装好
  * 过程类模块:
    * 本身不含数据
    * 调用数据类模块或过程类模块
  * 模块的重要性:
    * 减少模块间的耦合 => 降低软件复杂性
    * 模块的清晰是复用的基础
  * 模块切分的误区
    * 因为代码量少, 所有代码放到一个文件夹中 (错)
    * 所有工具方法都放在 util 中 (错)
* 类和函数
  * 类和函数是两种不同的模型, 有他们各自适用的范围
  * 推荐: 和类的成员属性无关的函数, 作为一个独立的函数
  * **函数**: 系统->子系统->模块->函数
    * 函数的切分也非常重要, 如何进行函数切分: (能够用一句话描述函数的功能)
    * 函数描述的3要素:
      * 功能描述:
      * 传入参数描述:
      * 返回值描述:
    * 函数的规模: 要足够的小
      * python: 30行结束
      * C/C++: 两屏内完成
    * 函数的返回值:
      * 每个函数应该具有明确的语义, 根据函数的语义, 函数的返回值有3中类型
      * True, False : 逻辑判断型函数
      * OK, Error: 操作型函数
      * Data, None: 数据获取型函数, golang为 (data, err)
    * 函数: 单入口, 单出口 是一种推荐形式  (特别是涉及到资源释放的时候, **单出口就更加重要了**)
      * 单入口:
      * 单出口: 一个return
      * 当然, 总有多出口的函数, 这种函数越往底越好.
    * 使用空格来分隔函数中的代码块. 代码的段落分清楚
    * 注释: **先写注释, 再写代码**
* 命名: **望名生义**
  * 概念是建立模型的出发点
  * 命名存在的问题: 名字不携带信息, 名字携带错误的信息
  * 可读性: ClassName, GLOBAL_CONSTANT_NAME, module_name
* 系统的可监控性非常重要

## 如何成为优秀的软件工程师

* 学习-思考-实践
  * 建立学习的习惯, (途径: 书, 开源代码)
  * 学而不思则罔
  * 所有重要的进步, 都来源于失败和挫折的经历
* 知识-方法-精神
  * 知识过时快, 只学知识的人, 总是感觉世界变化太快
  * 方法: 分析问题, 解决问题的方法才是最重要的, (research: 发现最重要问题, 并解决之)
  * 精神: 独立精神, 自由思想, don't follow
* 基础乃治学之根本
  * 软件工程师基础:  (5~8年打好基础)
    * 数据结构, 算法, 操作系统, 系统结构, 计算机网络
    * 软件工程, 编程思想
    * 罗辑思维能力, 归纳总结能力, 表达能力
    * 研究能力: 分析问题, 解决问题



# 工程能力

* 使用 **系统化方法** , 在 **保证质量** 的前提下, **更高效率** 的的为客户/用户 **持续交付**  **有价值** 的软件或服务能力
* 研发的目的: 
  * 提供价值, 技术只是手段而不是目的.
  * 软件项目规划: 从 客户需求 或 商业价值的 角度思考
  * 建立成本意识: 学会计算投入产出比, 努力用最小的成本换更大的价值.
* 质量第一: 根据场景和需求
  * 根据场景和需求 来决定 质量要求
  * 不应该对质量进行妥协
  * 平衡质量 和 交付时间的关系
  * 软件设计保证质量:  代码容错能力, 提高可运维性.
* 个人能力要求
  * 必备技能: 需求把握, 系统设计, 编码能力, 项目管理, 运维能力
    * 需求把握: 
      * 细致的调研和分析; 准确理解用户和项目的功能, 性能, 可靠性要求; 将用户的非形式的表达转化为 完整的需求定义, 从而确定系统必须做什么.
      * 重要性: 直接影响软件/服务的价值; 直接影响研发的工作量; 决定打的准不准.
    * 项目管理:
      * 重要性: 没有良好项目管理的项目, 是低效甚至失败的; 所有的研发活动, 都应该使用项目管理方法; 即使只有一个人, 也需要项目管理; 项目管理优先于技术
      * 项目: 限定时间 和 限定资源下, 完成明确目标
      * 项目管理: 为了是项目能够按照预订的 成本, 速度, 质量 顺利完成. 对 人员, 产品, 过程和项目进行分析管理的活动  (质量不能妥协)
      * 计划意识: 
        * 总体计划, 阶段计划, 和有效的管理控制; 模块工作量的合理评估
        * 全局意识: 对项目有整体意识 (对于自己负责的其它部分 有了解)
        * 风险意识: 确保风险的解决方案
        * 协作意识: 研发流程, 角色配合, 沟通会报机制
        * 个人: 个人时间管理 和 个人周报 开始 
    * 运维能力:
      * 
  * 认识和观念: 产品意识, 客户服务意识, 安全意识, 质量意识
    * 产品意识: 用户需求的角度出发
      * 发现用户需求的能力: 针对特定用户, 分析典型场景, 发现其核心需求
      * 规划产品的能力: 功能要缓慢的交付给用户, 不要一次交付太多功能
      * 理解业务的能力: 对产品认识深入, 能够理解产品的目标
      * 优化体验的能力: 数据分析, 交互设计, 视觉设计等手段, 持续优化用户使用产品的体验.
      * 产品运营的能力: 引导用户深入使用产品
    * 客户服务意识:
      * 站在客户视角, 树立很好的客户服务精神
  * 软技能: 顺畅的沟通能力



# 代码质量

* C++

  * 风格或约定

    * 头文件引用

      * 顺序: 1. 当前cpp的头文件, 2. C/C++ 标准库, 3. 其他库, 4. 自己项目的头文件
      * 头文件使用 #progma once

      ```c++
      /************************
      * Copyright (c) ...
      *************************/
      /**
      * @file xxx
      * @author xxx
      * @brief xxx
      * @date xxx
      **/
      #progma once
      ```

    * 排版
      * 单独语句单独成行
    * 命名规范
      * 
    * 注释
    * 变量声明

  * 语法:

    * 面向对象编程
      * class: 
      * struct: 仅用作结构体使用 
    * 其它C++特性
    * C/C++共有特性

  * 规则特例:

    * 

