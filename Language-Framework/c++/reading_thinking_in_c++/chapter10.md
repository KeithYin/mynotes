# chapter 10

**名字控制**



## 名字可见性控制

* static
* namespace



**static**

* 在固定的地址上进行存储分配，也就是说，对象是在一个特殊的**静态数据区**上创建的，而不是每次函数调用时在堆栈上产生的。
* 对一个特定的编译单位来说是**局部**的。**static** 控制名字的可见性，所以这个名字在 这个 单元或 类之外是不可见的。这也描述的了连接的概念，它决定连接器将看到哪些名字。



## 函数内部的静态变量

```c++
int func(){
  static int i = 1; // 这个对象仅在第一次调用时初始化一次，而不是每次调用都初始化
  int j = 2;
}
```

* 静态对象的析构函数在 程序结束后才被释放
* 静态对象需要初始化，如果是内建类型，编译器会帮助搞定初始化，如果是自定义，需要构造函数来初始化



## 控制连接

一般来说，文件作用域内的所有名字，对程序中的 所有翻译单元来说都是可见的。这就是所谓的外部链接，因为在链接的时候这个名字对于连接器来说是可见的，对单独的翻译单元来说，他是外部的。

**全局变量和普通函数都有外部连接**



**默认为内部连接的单元**

* 常量
* 内联函数

**默认为全局连接的单元**

* 全局变量
* 普通函数



**static 控制名字可见性**

```c++
static int i = 0;
static int func(){
  
}
static int func2();
```



## 名字空间

感觉命名空间只是对 里面的名字加了个前缀而已。（编译器的角度来看）

```c++
namespace Name{
  
}
```

* namespace 只能在全局范围内定义
* 可以互相嵌套
* 结束不加分号
* 定义的内容可以在多个头文件中连续

```c++
// 别名命名空间
namespace Bob = BobsSuperDuperLibrary;

//未命名名字空间：内部连接
namespace{
  // do something
}
```





## Glossary

* **文件作用域内的名字（file scope）** ： 不嵌套在类或函数中的名字。
* ​