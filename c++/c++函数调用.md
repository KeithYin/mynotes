# c++函数调用

当编译器为函数调用产生代码时，执行了以下步骤：

* 如果有返回值，
  * 就将接收返回值的对象的地址压栈。
  * 如果没有接收返回值的对象，就创建一个临时对象，将其地址压栈
* 将函数的参数从右向左压栈。
* 然后执行汇编的CALL指令。CALL指令会将程序代码中的函数调用指令的地址压栈
* 将函数中的局部变量压栈
* 返回：汇编代码中的`ret`指令负责函数调用返回，会将`CALL`指令压栈的地址取出放入 `IP`寄存器。



## 复制构造函数的调用

```c++
A a = generateA();
# 从汇编的角度来看，就是右边的表达式最后 CALL A的复制构造函数，然后move给a。
```

